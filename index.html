<!doctype html>
<html>
 <head>
  <title>Mahjong Solitaire by Keith Gabryelski</title>
  <meta charset="UTF-8">
  <meta name="description" content="Mahjong solitaire is a single player matching game that uses a set of mahjong tiles rather than cards written by Keith Gabryelski." />
  <meta property="og:url" content="https://rawgit.com/keithgabryelski/backbone-mahjong/master/index.html" />
  <meta property="og:type" content="Game" />
  <meta property="og:title" content="Mahjong Solitaire" />
  <meta property="og:description" content="Mahjong solitaire is a single player matching game that uses a set of mahjong tiles rather than cards written by Keith Gabryelski." />
  <meta property="og:image" content="https://rawgit.com/keithgabryelski/backbone-mahjong/master/images/MahjongSolitaire.png" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="css/styles.css" />
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/flick/jquery-ui.css" />
  <link href="css/jasny-bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-slider.css" rel="stylesheet">
 </head>
 <body>
  <div id="content" class="container-fluid" style="height: 100%"></div>

  <!-- Templates -->
  <script type="text/template" id="tpl-splash">
  <div id="splashscreen" class="jumbotron" style="height: 100%">
  <div class="row">
    <div class="col-sm-6">
      <h1>Mahjong Solitaire</h1>
      <h2>by <a href="https://github.com/keithgabryelski">keithgabryelski</a></h2>
    </div>
    <div id="splash_icon" class="col-sm-6">
      <span id="splash_icon_bottom" class="splash_icon_bottom"></span>
      <span id="splash_icon_top" class="splash_icon_top"></span>
    </div>
  </div>
  </div>
  </script>

  <script type="text/template" id="tpl-configuration">
    <p>Welcome to Mahjong Solitaire</p>

    <form role="form">
      <div class="form-group">
        <label for="layout">Board Layout</label>
        <select id="layout" class="form-control">
            <% app.boardLayouts.each(function(layout) { %>
                <option value="<%= layout.get('ID') %>"<%= board_layout_id == layout.get('ID') ? " SELECTED" : "" %> ><%= layout.get('name') %></option>
            <% }); %>
        </select>
      </div
      <div class="form-group">
        <label for="background">Background</label>
        <select id="background" class="form-control">
            <% app.backgrounds.each(function(background) { %>
                <option value="<%= background.get('ID') %>"<%= background_id == background.get('ID') ? " SELECTED" : "" %> ><%= background.get('name') %></option>
            <% }); %>
        </select>
      </div>
      <div class="form-group">
        <label for="tile_renderer">Tile Renderer</label>
        <select id="tile_renderer" class="form-control">
            <% app.tileRenderers.each(function(tile_renderer) { %>
                <option value="<%= tile_renderer.get('ID') %>"<%= tile_renderer_id == tile_renderer.get('ID') ? " SELECTED" : "" %> ><%= tile_renderer.get('name') %></option>
            <% }); %>
        </select>
      </div>
      <div class="form-group">
        <label for="audio_volume">Audio Volume</label>
        <input id="audio_volume" data-slider-id='audioVolumeSlider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="5" data-slider-value="75"/>
      </div>
      <button type="submit" class="btn btn-default">Start Game</button>
    </form>
  </script>

  <script type="text/template" id="tpl-board-history">
    <table id="history_with_scrollbar">
      <tr id="scroll">
        <% _.each(collection, function(tile_pair, index, collection) { %>
        <% tile_pair = collection.at(index); %>
        <td><%= tile_pair.get('tile1').get('view').outerHTML %></td>
        <td><%= tile_pair.get('tile2').get('view').outerHTML %></td>
        <td>&nbsp;</td>
        <% }, this); %>
      </tr>
    </table>
  </script>

  <script type="text/template" id="tpl-board-status">
  <div class="panel panel-default">
    <div class="panel-body">
      <h3 class="panel-title"><%= status %></h3>
      <div>Matches Available: <span id="matches_available"><%= tiles_having_matches.length %></span></div>
      <div>Tiles Left: <span id="tiles_left"><%= tiles_on_board.length %></span></div>
      <div>Timer: <span id="timer"><%= timer > (60 * 60) ? (new Date(timer * 1000)).toUTCString().match(/(\d\d:\d\d:\d\d)/)[0] : (new Date(timer * 1000)).toUTCString().match(/\d\d:(\d\d:\d\d)/)[1] %></span></div>
    </div>
  </div>
  </script>

  <script type="text/template" id="tpl-game-timer">
  <%= timer > (60 * 60) ? (new Date(timer * 1000)).toUTCString().match(/(\d\d:\d\d:\d\d)/)[0] : (new Date(timer * 1000)).toUTCString().match(/\d\d:(\d\d:\d\d)/)[1] %>
  </script>

  <script type="text/template" id="tpl-game-status">
  <%= status %>
  </script>

  <script type="text/template" id="tpl-game-details">
  <div>Tiles Left: <%= tiles_on_board.length %></div>
  <div>Matches Available: <%= tiles_having_matches.length %></div>
  </script>

  <script type="text/template" id="tpl-board-controls">
  </script>

  <script type="text/template" id="tpl-mahjong">
  <div class="row" style="height: 100%;">
  <div id="mahjongBoard" class="panel-body" style="position: relative; margin:0; padding: 0; height: 100%;"></div>

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="navbar-inner">
        <div class="navbar-brand nav pull-left"><%= board_layout_name %></div>
        <div id="mahjongGameTimer" class="nav navbar-text"></div>
        <div id="mahjongGameStatus" class="nav navbar-text"></div>
        <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target="#history_area">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <button id="hintButton" class="btn btn-default navbar-btn hint pull-right">hint</button>
        <button id="undoButton" class="btn btn-default navbar-btn undo pull-right">undo</button>
        <button id="quitButton" class="btn navbar-btn btn-danger quit pull-right">quit</button>
      </div>
    </nav>

    <div id="history_area" class="panel panel-default panel-bottom offcanvas navbar-fixed-bottom">
      <div class="panel-heading">
        <h3 class="panel-title">History</h3>
      </div>
      <div id="mahjongBoardHistory" class="panel-body"></div>
    </div>

  </div>
  </script>

  <!-- Templates -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.3.1/mobile-detect.min.js"></script>
  <script src="js/vendor/jasny-bootstrap.min.js"></script>
  <script src="js/vendor/underscore.js"></script>
  <script src="js/vendor/backbone.js"></script>
  <script src="js/vendor/jquery.cookie.js"></script>
  <script src="js/vendor/backbone-cookies.js"></script>
  <script src="js/vendor/bootstrap-slider.js"></script>

  <script src="js/App.js"></script>

  <script src="js/models/Type.js"></script>
  <script src="js/models/BoardLayout.js"></script>
  <script src="js/models/Background.js"></script>
  <script src="js/models/Configuration.js"></script>
  <script src="js/models/Deck.js"></script>
  <script src="js/models/TileMatchingStyle.js"></script>
  <script src="js/models/TileCategory.js"></script>
  <script src="js/models/TileCategoryGroup.js"></script>
  <script src="js/models/Tile.js"></script>
  <script src="js/models/Position.js"></script>
  <script src="js/models/PositionedTile.js"></script>
  <script src="js/models/TilePair.js"></script>
  <script src="js/models/TileRenderer.js"></script>
  <script src="js/models/AudioBoard.js"></script>

  <script src="js/collections/Types.js"></script>
  <script src="js/collections/BoardLayouts.js"></script>
  <script src="js/collections/Backgrounds.js"></script>
  <script src="js/collections/TileMatchingStyles.js"></script>
  <script src="js/collections/TileCategories.js"></script>
  <script src="js/collections/TileCategoryGroups.js"></script>
  <script src="js/collections/Tiles.js"></script>
  <script src="js/collections/Decks.js"></script>
  <script src="js/collections/TilePairs.js"></script>
  <script src="js/collections/Positions.js"></script>
  <script src="js/collections/PositionedTiles.js"></script>
  <script src="js/collections/TileRenderers.js"></script>

  <script src="js/models/BoardStatus.js"></script>

  <script src="js/data/BoardLayouts.js"></script>
  <script src="js/data/Backgrounds.js"></script>
  <script src="js/data/TileMatchingStyles.js"></script>
  <script src="js/data/TileCategoryGroups.js"></script>
  <script src="js/data/TileCategories.js"></script>
  <script src="js/data/Tiles.js"></script>
  <script src="js/data/Decks.js"></script>

  <script src="js/models/Board.js"></script>

  <script src="js/data/AudioBoard.js"></script>

  <script src="js/logical/HitMaster.js"></script>
  <script src="js/logical/Dealer.js"></script>
  <script src="js/logical/TileManager.js"></script>
  <script src="js/logical/BoardManager.js"></script>
  <script src="js/logical/tile_plugs/UnicodeTilePlug.js"></script>
  <script src="js/logical/tile_plugs/UnicodeWithColoredBackTilePlug.js"></script>
  <script src="js/logical/TileAdapter.js"></script>
  <script src="js/logical/TileManager.js"></script>
  <script src="js/logical/MahjongGame.js"></script>

  <script src="js/views/splash.js"></script>
  <script src="js/views/configuration.js"></script>
  <script src="js/views/board_status.js"></script>
  <script src="js/views/board_controls.js"></script>
  <script src="js/views/board_history.js"></script>
  <script src="js/views/game_timer.js"></script>
  <script src="js/views/game_status.js"></script>
  <script src="js/views/game_details.js"></script>
  <script src="js/views/mahjong.js"></script>

  <script src="js/data/TileRenderers.js"></script>

  <script>
    window.onload = function() {
      app.init();
    }
  </script>
 </body>
</html>
